From 1d8ef19ec47c3dbd917d33371d6053d69abdd6b0 Mon Sep 17 00:00:00 2001
From: Marcos Marado <mmarado@cyngn.com>
Date: Tue, 12 Jul 2016 17:14:00 +0100
Subject: [PATCH] security: arm64 support to CCI driver

ANDROID_28086229 affects the arm64 support, which is not an issue for this
device, which is 32bit.

Issue: PAELLA-201

Change-Id: Ifdbe2ee158345316d123d6fd21031f7bb4c8127f
---

diff --git a/drivers/bus/arm-cci.c b/drivers/bus/arm-cci.c
index 9437d31..1176ca7 100644
--- a/drivers/bus/arm-cci.c
+++ b/drivers/bus/arm-cci.c
@@ -65,7 +65,6 @@
 static void __iomem *cci_ctrl_base;
 static unsigned long cci_ctrl_phys;
 
-static u32 from_idle;
 static u32 cci_version;
 
 #ifdef CONFIG_HW_PERF_EVENTS
@@ -762,7 +761,6 @@
 
 	pmu->hw_events.events = pmu->events;
 	pmu->hw_events.used_mask = pmu->used_mask;
-	pmu->hw_events.from_idle = &from_idle;
 	raw_spin_lock_init(&pmu->hw_events.pmu_lock);
 
 	ret = cci_pmu_init(pmu->cci_pmu, pdev);
