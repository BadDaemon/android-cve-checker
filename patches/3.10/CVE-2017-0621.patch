From 436ebaa4925f951b54a7caa2f41a8de9056fe84c Mon Sep 17 00:00:00 2001
From: Rajesh Bondugula <rajeshb@codeaurora.org>
Date: Mon, 04 May 2015 12:05:20 -0700
Subject: [PATCH] msm: camera: sensor: Fix the improper pointer dereference

Pass flash_ctrl to msm_torch_create_classdev
instead of &flash_ctrl.
This change will fix the improper pointer
dereference issue. msm_torch_create_classdev needs
flash_ctrl pointer to retrieve torch informaiton.

Change-Id: I05bf130b2161336e93122d7e918a4c48a6b381e2
Signed-off-by: Rajesh Bondugula <rajeshb@codeaurora.org>
---

diff --git a/drivers/media/platform/msm/camera_v2/sensor/flash/msm_flash.c b/drivers/media/platform/msm/camera_v2/sensor/flash/msm_flash.c
index bbf4a2d..d1eeae5 100644
--- a/drivers/media/platform/msm/camera_v2/sensor/flash/msm_flash.c
+++ b/drivers/media/platform/msm/camera_v2/sensor/flash/msm_flash.c
@@ -1017,7 +1017,7 @@
 	flash_ctrl->msm_sd.sd.devnode->fops = &msm_flash_v4l2_subdev_fops;
 
 	if (flash_ctrl->flash_driver_type == FLASH_DRIVER_PMIC)
-		rc = msm_torch_create_classdev(pdev, &flash_ctrl);
+		rc = msm_torch_create_classdev(pdev, flash_ctrl);
 
 	CDBG("probe success\n");
 	return rc;
