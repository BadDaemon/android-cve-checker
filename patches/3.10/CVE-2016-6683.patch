From cb0f6442f30ae1169db56fb82b5f100b10f67ddd Mon Sep 17 00:00:00 2001
From: Nick Desaulniers <ndesaulniers@google.com>
Date: Fri, 14 Oct 2016 12:18:58 +0200
Subject: [PATCH] binder: prevent kptr leak by using %pK format specifier

Works in conjunction with kptr_restrict.
Bug: 30143283

Change-Id: I2b3ce22f4e206e74614d51453a1d59b7080ab05a
---

diff --git a/drivers/android/binder.c b/drivers/android/binder.c
index 3062d4d..945c7c5 100755
--- a/drivers/android/binder.c
+++ b/drivers/android/binder.c
@@ -3341,7 +3341,7 @@
 
 static void print_binder_ref(struct seq_file *m, struct binder_ref *ref)
 {
-	seq_printf(m, "  ref %d: desc %d %snode %d s %d w %d d %p\n",
+	seq_printf(m, "  ref %d: desc %d %snode %d s %d w %d d %pK\n",
 		   ref->debug_id, ref->desc, ref->node->proc ? "" : "dead ",
 		   ref->node->debug_id, ref->strong, ref->weak, ref->death);
 }
